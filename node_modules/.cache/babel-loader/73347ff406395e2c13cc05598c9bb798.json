{"ast":null,"code":"var __read = this && this.__read || function (o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o),\n    r,\n    ar = [],\n    e;\n  try {\n    while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  } catch (error) {\n    e = {\n      error: error\n    };\n  } finally {\n    try {\n      if (r && !r.done && (m = i[\"return\"])) m.call(i);\n    } finally {\n      if (e) throw e.error;\n    }\n  }\n  return ar;\n};\nimport { createRef, useCallback, useMemo, useState } from \"react\";\nimport { loop } from \"@react-md/utils\";\n/**\n * @internal\n */\nvar attemptFocus = function (index, panels) {\n  var _a;\n  var panel = (_a = panels[index]) === null || _a === void 0 ? void 0 : _a.headerRef.current;\n  if (panel) {\n    panel.focus();\n  }\n};\n/**\n * This hook is used to control the expansion of a list of panels along with\n * providing some of the required props for each panel. This hook will provide\n * an ordered list of:\n *\n * - the list of panel props that include the `id`, `key`, `expanded`, and\n *   `onExpandChange`.\n * - a keydown event handler to pass to a parent component (normally the\n *   ExpansionList) to allow keyboard movement with the arrow keys, and home+end\n *   keys. This should only be used when there are multiple panels.\n * - the current list of panel ids that are expanded\n * - the React setState dispatcher for controlling the expanded list of ids\n *   manually if desired\n * - a function to create a handler for toggling the expansion of a specific\n *   panel\n *\n * This hook is usually used to control a list of expansion panels, but can also\n * control a single panel if desired.\n *\n * Examples:\n *\n * Single panel:\n *\n * ```tsx\n * const [panels] = usePanels({ count: 1, idPrefix: \"my-panel\" });\n * // since the count is one, it'll just be a list of only one panel props\n * const [panelProps] = panels;\n *\n * return (\n *   <ExpansionPanel {...panelProps}>\n *     Content within the panel...\n *   </ExpansionPanel>\n * );\n * ```\n *\n * Multiple Panels:\n *\n * ```tsx\n * const [panels, onKeyDown] = usePanels({ count: 3, idPrefix: \"panel-list\" });\n *\n * const [panel1Props, panel2Props, panel3Props] = panels;\n *\n * return (\n *   <ExpansionList onKeyDown={onKeyDown}>\n *     <ExpansionPanel {...panel1Props}>\n *       Panel 1 Content...\n *     </ExpansionPanel>\n *     <ExpansionPanel {...panel2Props}>\n *       Panel 2 Content...\n *     </ExpansionPanel>\n *     <ExpansionPanel {...panel3Props}>\n *       Panel 3 Content...\n *     </ExpansionPanel>\n *   </ExpansionList>\n * );\n * ```\n */\nexport function usePanels(_a) {\n  var idPrefix = _a.idPrefix,\n    count = _a.count,\n    _b = _a.multiple,\n    multiple = _b === void 0 ? false : _b,\n    _c = _a.preventAllClosed,\n    preventAllClosed = _c === void 0 ? false : _c,\n    defaultExpandedIndex = _a.defaultExpandedIndex;\n  if (process.env.NODE_ENV !== \"production\") {\n    if (count < 1) {\n      throw new RangeError(\"The `count` must be greater than `0`\");\n    }\n    if (typeof defaultExpandedIndex === \"number\" && defaultExpandedIndex >= count) {\n      throw new RangeError(\"The `defaultExpandedIndex` must be less than or equal to the `count`\");\n    }\n    if (typeof defaultExpandedIndex === \"number\" && defaultExpandedIndex < -1) {\n      throw new RangeError(\"The `defaultExpandedIndex` must be greater than or equal to `-1`\");\n    }\n    if (Array.isArray(defaultExpandedIndex)) {\n      var greater = defaultExpandedIndex.filter(function (i) {\n        return i > count;\n      });\n      if (greater.length) {\n        throw new RangeError(\"The `defaultExpandedIndex` array must contain numbers less than the `count`\");\n      }\n      var lessThan = defaultExpandedIndex.filter(function (i) {\n        return i < 0;\n      });\n      if (lessThan.length) {\n        throw new RangeError(\"The `defaultExpandedIndex` array must contain numbers greater than or equal to `0`\");\n      }\n    }\n  }\n  var panels = useMemo(function () {\n    return Array.from({\n      length: count\n    }, function (_, i) {\n      return {\n        id: \"\".concat(idPrefix, \"-\").concat(i + 1),\n        headerRef: createRef()\n      };\n    });\n  }, [idPrefix, count]);\n  var _d = __read(useState(function () {\n      if (typeof defaultExpandedIndex === \"undefined\") {\n        return preventAllClosed ? [panels[0].id] : [];\n      }\n      if (typeof defaultExpandedIndex === \"number\") {\n        return defaultExpandedIndex === -1 ? panels.map(function (_a) {\n          var id = _a.id;\n          return id;\n        }) : [panels[Math.min(defaultExpandedIndex, panels.length)].id];\n      }\n      return panels.filter(function (_, i) {\n        return defaultExpandedIndex.includes(i);\n      }).map(function (_a) {\n        var id = _a.id;\n        return id;\n      });\n    }), 2),\n    expandedIds = _d[0],\n    setExpandedIds = _d[1];\n  var createExpandClick = function (panelId) {\n    return function () {\n      setExpandedIds(function (prevIds) {\n        var i = prevIds.indexOf(panelId);\n        if (!multiple) {\n          if (prevIds[0] === panelId && prevIds.length === 1) {\n            return preventAllClosed ? prevIds : [];\n          }\n          return [panelId];\n        }\n        var nextSelectedIds = prevIds.slice();\n        if (i === -1) {\n          nextSelectedIds.push(panelId);\n        } else {\n          nextSelectedIds.splice(i, 1);\n        }\n        if (preventAllClosed && nextSelectedIds.length === 0) {\n          return [panelId];\n        }\n        return nextSelectedIds;\n      });\n    };\n  };\n  var previousExpanded = false;\n  var panelPropList = panels.map(function (_a, i) {\n    var id = _a.id,\n      headerRef = _a.headerRef;\n    var expanded = expandedIds.includes(id);\n    var marginTop = i > 0 && (expanded || previousExpanded);\n    previousExpanded = expanded;\n    return {\n      id: id,\n      disabled: expanded && preventAllClosed && expandedIds.length === 1,\n      expanded: expanded,\n      headerRef: headerRef,\n      marginTop: marginTop,\n      onExpandClick: createExpandClick(id)\n    };\n  });\n  var onKeyDown = useCallback(function (event) {\n    if (event.shiftKey || event.ctrlKey || event.metaKey || event.altKey) {\n      return;\n    }\n    var key = event.key;\n    var increment = key === \"ArrowDown\";\n    var decrement = key === \"ArrowUp\";\n    var jumpToFirst = key === \"Home\";\n    var jumpToLast = key === \"End\";\n    if (!increment && !decrement && !jumpToFirst && !jumpToLast) {\n      return;\n    }\n    var currentIndex = panels.findIndex(function (_a) {\n      var headerRef = _a.headerRef;\n      return event.target === headerRef.current;\n    });\n    if (currentIndex === -1) {\n      return;\n    }\n    // don't want page scroll behavior\n    event.preventDefault();\n    if (jumpToFirst) {\n      attemptFocus(0, panels);\n      return;\n    }\n    if (jumpToLast) {\n      attemptFocus(panels.length - 1, panels);\n      return;\n    }\n    attemptFocus(loop({\n      value: currentIndex,\n      max: panels.length - 1,\n      increment: increment\n    }), panels);\n  }, [panels]);\n  return [panelPropList, onKeyDown, expandedIds, setExpandedIds, createExpandClick];\n}","map":{"version":3,"mappings":"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","names":["createRef","useCallback","useMemo","useState","loop","attemptFocus","index","panels","panel","headerRef","current","focus","usePanels","_a","idPrefix","count","_b","multiple","_c","preventAllClosed","defaultExpandedIndex","process","env","NODE_ENV","RangeError","Array","isArray","greater","filter","i","length","lessThan","from","_","id","map","Math","min","includes","expandedIds","setExpandedIds","createExpandClick","panelId","prevIds","indexOf","nextSelectedIds","slice","push","splice","previousExpanded","panelPropList","expanded","marginTop","disabled","onExpandClick","onKeyDown","event","shiftKey","ctrlKey","metaKey","altKey","increment","key","decrement","jumpToFirst","jumpToLast","currentIndex","findIndex","target","preventDefault","value","max"],"sources":["/Users/erin/Desktop/finalProg/node_modules/@react-md/expansion-panel/src/usePanels.ts"],"sourcesContent":["import type {\n  Dispatch,\n  KeyboardEventHandler,\n  RefObject,\n  SetStateAction,\n} from \"react\";\nimport { createRef, useCallback, useMemo, useState } from \"react\";\nimport { loop } from \"@react-md/utils\";\n\nexport interface UsePanelsOptions {\n  /**\n   * The prefix to use for all of the panel ids. This is used to generate the id\n   * for each panel as well as determine if a panel is expanded.\n   */\n  idPrefix: string;\n\n  /**\n   * The number of panels that will be used by this expansion logic and\n   * generates the number of panel props to be used in the return value. This\n   * should be a number greater than 0 and will throw a `RangeError` if it is\n   * not in development.\n   */\n  count: number;\n\n  /**\n   * Boolean if multiple panels can be expanded at a time. The default behavior\n   * is to only allow one panel to be expanded and will close the previous panel\n   * when a new one is expanded.\n   */\n  multiple?: boolean;\n\n  /**\n   * Boolean if the expansion logic should prevent all the panels from being\n   * closed.\n   */\n  preventAllClosed?: boolean;\n\n  /**\n   * Either the index that should be expanded by default, a list of indexes that\n   * should be expanded by default, or `-1` which will expand all panels by\n   * default.\n   *\n   * When this is omitted and `undefined`, no panels will be expanded by\n   * default.\n   */\n  defaultExpandedIndex?: number | readonly number[];\n}\n\n/**\n * An object of props that gets generated for each panel within the hook.\n */\nexport interface ProvidedPanelProps {\n  /**\n   * The DOM id for the panel which is really just `${idPrefix}-${index + 1}`.\n   */\n  id: string;\n\n  /**\n   * A ref object for the panel. This is required so that the parent keyboard\n   * event handler can focus the next/previous/first/last panel when the correct\n   * arrow key or home/end key is pressed. If there is only one panel and the\n   * keydown event handler isn't being used, this prop is not required to be\n   * passed to the expansion panel.\n   */\n  headerRef: RefObject<HTMLButtonElement>;\n\n  /**\n   * This will be `true` when the panel is expanded or the previous panel was\n   * expanded and the panel is not the first panel in the list.\n   */\n  marginTop: boolean;\n\n  /**\n   * Boolean if the panel's expansion state should be disabled. This will only\n   * be true when the `preventAllClosed` option has been enabled and the panel\n   * is the last remaining expanded panel.\n   */\n  disabled: boolean;\n\n  /**\n   * Boolean if the panel is currently expanded.\n   */\n  expanded: boolean;\n\n  /**\n   * A function that will toggle the expansion of this panel in the list.\n   */\n  onExpandClick(): void;\n}\n\ntype ExpandedIds = readonly string[];\ntype CreateExpandById = (panelId: string) => () => void;\ntype ExpansionDispatcher = Dispatch<SetStateAction<ExpandedIds>>;\ntype ExpansionPanelKeyDownHandler = KeyboardEventHandler<HTMLDivElement>;\n\ntype ReturnValue = [\n  readonly ProvidedPanelProps[],\n  ExpansionPanelKeyDownHandler,\n  ExpandedIds,\n  ExpansionDispatcher,\n  CreateExpandById\n];\n\ntype PanelMemo = Pick<ProvidedPanelProps, \"id\" | \"headerRef\">;\n\n/**\n * @internal\n */\nconst attemptFocus = (index: number, panels: readonly PanelMemo[]): void => {\n  const panel = panels[index]?.headerRef.current;\n  if (panel) {\n    panel.focus();\n  }\n};\n\n/**\n * This hook is used to control the expansion of a list of panels along with\n * providing some of the required props for each panel. This hook will provide\n * an ordered list of:\n *\n * - the list of panel props that include the `id`, `key`, `expanded`, and\n *   `onExpandChange`.\n * - a keydown event handler to pass to a parent component (normally the\n *   ExpansionList) to allow keyboard movement with the arrow keys, and home+end\n *   keys. This should only be used when there are multiple panels.\n * - the current list of panel ids that are expanded\n * - the React setState dispatcher for controlling the expanded list of ids\n *   manually if desired\n * - a function to create a handler for toggling the expansion of a specific\n *   panel\n *\n * This hook is usually used to control a list of expansion panels, but can also\n * control a single panel if desired.\n *\n * Examples:\n *\n * Single panel:\n *\n * ```tsx\n * const [panels] = usePanels({ count: 1, idPrefix: \"my-panel\" });\n * // since the count is one, it'll just be a list of only one panel props\n * const [panelProps] = panels;\n *\n * return (\n *   <ExpansionPanel {...panelProps}>\n *     Content within the panel...\n *   </ExpansionPanel>\n * );\n * ```\n *\n * Multiple Panels:\n *\n * ```tsx\n * const [panels, onKeyDown] = usePanels({ count: 3, idPrefix: \"panel-list\" });\n *\n * const [panel1Props, panel2Props, panel3Props] = panels;\n *\n * return (\n *   <ExpansionList onKeyDown={onKeyDown}>\n *     <ExpansionPanel {...panel1Props}>\n *       Panel 1 Content...\n *     </ExpansionPanel>\n *     <ExpansionPanel {...panel2Props}>\n *       Panel 2 Content...\n *     </ExpansionPanel>\n *     <ExpansionPanel {...panel3Props}>\n *       Panel 3 Content...\n *     </ExpansionPanel>\n *   </ExpansionList>\n * );\n * ```\n */\nexport function usePanels({\n  idPrefix,\n  count,\n  multiple = false,\n  preventAllClosed = false,\n  defaultExpandedIndex,\n}: UsePanelsOptions): ReturnValue {\n  if (process.env.NODE_ENV !== \"production\") {\n    if (count < 1) {\n      throw new RangeError(\"The `count` must be greater than `0`\");\n    }\n\n    if (\n      typeof defaultExpandedIndex === \"number\" &&\n      defaultExpandedIndex >= count\n    ) {\n      throw new RangeError(\n        \"The `defaultExpandedIndex` must be less than or equal to the `count`\"\n      );\n    }\n\n    if (typeof defaultExpandedIndex === \"number\" && defaultExpandedIndex < -1) {\n      throw new RangeError(\n        \"The `defaultExpandedIndex` must be greater than or equal to `-1`\"\n      );\n    }\n\n    if (Array.isArray(defaultExpandedIndex)) {\n      const greater = defaultExpandedIndex.filter((i) => i > count);\n      if (greater.length) {\n        throw new RangeError(\n          \"The `defaultExpandedIndex` array must contain numbers less than the `count`\"\n        );\n      }\n\n      const lessThan = defaultExpandedIndex.filter((i) => i < 0);\n      if (lessThan.length) {\n        throw new RangeError(\n          \"The `defaultExpandedIndex` array must contain numbers greater than or equal to `0`\"\n        );\n      }\n    }\n  }\n\n  const panels = useMemo<readonly PanelMemo[]>(\n    () =>\n      Array.from({ length: count }, (_, i) => ({\n        id: `${idPrefix}-${i + 1}`,\n        headerRef: createRef<HTMLButtonElement>(),\n      })),\n    [idPrefix, count]\n  );\n\n  const [expandedIds, setExpandedIds] = useState<ExpandedIds>(() => {\n    if (typeof defaultExpandedIndex === \"undefined\") {\n      return preventAllClosed ? [panels[0].id] : [];\n    }\n\n    if (typeof defaultExpandedIndex === \"number\") {\n      return defaultExpandedIndex === -1\n        ? panels.map(({ id }) => id)\n        : [panels[Math.min(defaultExpandedIndex, panels.length)].id];\n    }\n\n    return panels\n      .filter((_, i) => defaultExpandedIndex.includes(i))\n      .map(({ id }) => id);\n  });\n\n  const createExpandClick: CreateExpandById = (panelId) => () => {\n    setExpandedIds((prevIds) => {\n      const i = prevIds.indexOf(panelId);\n      if (!multiple) {\n        if (prevIds[0] === panelId && prevIds.length === 1) {\n          return preventAllClosed ? prevIds : [];\n        }\n\n        return [panelId];\n      }\n\n      const nextSelectedIds = prevIds.slice();\n      if (i === -1) {\n        nextSelectedIds.push(panelId);\n      } else {\n        nextSelectedIds.splice(i, 1);\n      }\n\n      if (preventAllClosed && nextSelectedIds.length === 0) {\n        return [panelId];\n      }\n\n      return nextSelectedIds;\n    });\n  };\n\n  let previousExpanded = false;\n  const panelPropList = panels.map(({ id, headerRef }, i) => {\n    const expanded = expandedIds.includes(id);\n    const marginTop = i > 0 && (expanded || previousExpanded);\n    previousExpanded = expanded;\n\n    return {\n      id,\n      disabled: expanded && preventAllClosed && expandedIds.length === 1,\n      expanded,\n      headerRef,\n      marginTop,\n      onExpandClick: createExpandClick(id),\n    };\n  });\n\n  const onKeyDown = useCallback(\n    (event: React.KeyboardEvent<HTMLDivElement>) => {\n      if (event.shiftKey || event.ctrlKey || event.metaKey || event.altKey) {\n        return;\n      }\n\n      const { key } = event;\n      const increment = key === \"ArrowDown\";\n      const decrement = key === \"ArrowUp\";\n      const jumpToFirst = key === \"Home\";\n      const jumpToLast = key === \"End\";\n      if (!increment && !decrement && !jumpToFirst && !jumpToLast) {\n        return;\n      }\n\n      const currentIndex = panels.findIndex(\n        ({ headerRef }) => event.target === headerRef.current\n      );\n      if (currentIndex === -1) {\n        return;\n      }\n\n      // don't want page scroll behavior\n      event.preventDefault();\n      if (jumpToFirst) {\n        attemptFocus(0, panels);\n        return;\n      }\n\n      if (jumpToLast) {\n        attemptFocus(panels.length - 1, panels);\n        return;\n      }\n\n      attemptFocus(\n        loop({\n          value: currentIndex,\n          max: panels.length - 1,\n          increment,\n        }),\n        panels\n      );\n    },\n    [panels]\n  );\n\n  return [\n    panelPropList,\n    onKeyDown,\n    expandedIds,\n    setExpandedIds,\n    createExpandClick,\n  ];\n}\n"]},"metadata":{},"sourceType":"module"}